<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.12.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="蚂蚁的博客">
<meta property="og:url" content="http://example.com/page/45/index.html">
<meta property="og:site_name" content="蚂蚁的博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="mayi">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/page/45/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/45/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>蚂蚁的博客</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">蚂蚁的博客</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">mayi</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">379</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">37</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/07/29/yuque/linux%E6%80%A7%E8%83%BD%E5%92%8C%E8%B0%83%E4%BC%98-%E7%90%86%E8%A7%A3%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="mayi">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蚂蚁的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 蚂蚁的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/07/29/yuque/linux%E6%80%A7%E8%83%BD%E5%92%8C%E8%B0%83%E4%BC%98-%E7%90%86%E8%A7%A3%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" class="post-title-link" itemprop="url">linux性能和调优-理解操作系统</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-07-29 11:22:00" itemprop="dateCreated datePublished" datetime="2020-07-29T11:22:00+08:00">2020-07-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-06-29 11:46:59" itemprop="dateModified" datetime="2022-06-29T11:46:59+08:00">2022-06-29</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>系统知识要理解，所有程序都在操作系统的限制下运行。此书是 redhat 红皮书，陈浩推荐阅读。</p>
<h2 id="第一章：理解-linux-操作系统"><a href="#第一章：理解-linux-操作系统" class="headerlink" title="第一章：理解 linux 操作系统"></a>第一章：理解 linux 操作系统</h2><h3 id="Linux-进程管理"><a href="#Linux-进程管理" class="headerlink" title="Linux 进程管理"></a>Linux 进程管理</h3><p>程序运行在图 1-1 环境中，每一个模块都有可能影响程序性能。<br><img src="http://huilu-blog.colinspace.com//FpY2zRcRoZDW4jHCG4Qgb-DxvIsU.png"><br>linux 内核定义了进程的数据结构，对进程进行管理就是调度系统读取进程属性，执行调度并更新进程属性。<br><img src="http://huilu-blog.colinspace.com//Fm3pO1-aRpnptMi8DWX5fj5AZ1zk.png"><br>进程和线程的区别，进程会拷贝父进程的资源（内存里面的字节码、静态变量、堆栈），便于独立管理。进程里面的多个线程，不拷贝线程资源，直接共享进程资源，程序需要注意线程安全，方式共享资源被同时更改导致不一致，主要通过锁机制。当前操作系统线程实现机制组要是 Native POSIX Thread Library (NPTL)，redhat 开发。<br><img src="http://huilu-blog.colinspace.com//FjG0vFMdVnnlUY-9S5_ldYheE9_1.png"><br>kernel 调整动态优先级，用户调整静态优先级 nice。普通用户可在 19-0 之间调整，root 用户可调整到负值。-19 最大。<br>CPU 以时间片为单位进行上下文切换，让用户感觉可以同时运行多个进程。切换会有额外开销。<br><img src="http://huilu-blog.colinspace.com//FhE0Ye6PD7kpif7YQT8Xj7_cyibv.png"><br>中断处理程序处理硬中断、软中断。进程处于不可中断状态，不能做上下文切换。<br><img src="http://huilu-blog.colinspace.com//FjI6nh-a16jeRObXjjN8veQag8TB.png"><br>Process memory segment 进程内存分段。内核为每个进程动态的分配内存。pmap 可查看进程内存分布。<br>Text segment：存储 CPU 可执行的字节码。<br>Data segment：存储静态变量，置零段，动态堆（地址值从低到高增长）。<br>Stack segment：存储本地变量，函数参数，函数返回值（从高到底增长）<br><img src="http://huilu-blog.colinspace.com//FkAQaf2bfZix50Px-vxVDHmkUOUX.png"><br>CPU 任务调度<br><a target="_blank" rel="noopener" href="http://baodunqiao.blog.sohu.com/104016437.html">Ingo Molnar</a> 2005 年改变通用互斥锁机制，使得内核调度算法将为 O(1).</p>
<h3 id="Linux-内存结构"><a href="#Linux-内存结构" class="headerlink" title="Linux 内存结构"></a>Linux 内存结构</h3><p>进程需要工作空间来完成任务，内存就是进程的工作空间。32 位系统，内核只能直接寻址 1G 空间，其他空间需要通过转换，64 位系统，内核能直接寻址 64G。<br><img src="http://huilu-blog.colinspace.com//FpXV4krZSi2VM6DvHeZzQJSd_M9z.png"><br><img src="http://huilu-blog.colinspace.com//FnpLuRDDKL3DjEdd1tdBuYxPSKOH.png"><br>数据在程序、内核、内存、磁盘中的流程图。<br><img src="http://huilu-blog.colinspace.com//Fnz474lhxVeLCVpue5SRiejs7Y-u.png"><br>一个页面就是物理内存或虚拟内存中一组连续的线性增加的地址。linux 内核以页面位单位管理内存。一个页面通常 4K。<br>A page is a group of contiguous linear addresses in physical memory (page frame) or virtual<br>memory.<br>伙伴系统分配内存，减少内存碎片，可分较大的连续内存地址。<br>   <img src="http://huilu-blog.colinspace.com//FvYieAhCfNNDIjFWAdoICMBvSMfQ.png"><br>kswapd 进程跟踪内存活动状态并标记，将标记为不活动的内存从新分配给用户进程。</p>
<h3 id="Linux-文件系统"><a href="#Linux-文件系统" class="headerlink" title="Linux 文件系统"></a>Linux 文件系统</h3><p>虚拟文件系统作为用户进程和各种文件系统之间的抽象层。用户用相同的指令，操作不同的文件系统。<br><img src="http://huilu-blog.colinspace.com//FrNK7k_8ofrUSw1HwjBo-deGPhoD.png"><br>非日志文件系统：一个写请求，内核将 meta 数据写入文件系统后，再将实际内容存储到具体的位置。当在写 meta 数据系统异常时，文件系统连续性会被破坏，需要使用 fsck 修复 meta 信息。<br>日志文件系统：在数据被真正写入文件系统前，先将数据变更写入日志区。由于多写一次日志，会有额外开销。<br><img src="http://huilu-blog.colinspace.com//Fjrb7XyDNYUpiNQDWpdveLnlyE3V.png"><br>Ext2 文件系统<br>文件系统从 boot sector 开始，每个 block group 包含超级块（记录整个文件系统数据，每个 block group 都有。<br><img src="http://huilu-blog.colinspace.com//FotOFECC9eljDLE6On62dtnm7n71.png"><br>读文件过程，先从文件路径找到 i-node，再从 i-node 读取文件。每个 i-node 指向一个数据块。<br><img src="http://huilu-blog.colinspace.com//FtmtyEJua4gvZl6_tnBZSp11vxBr.png"><br>Ext3 和 Ext2 最大的不同是，Ext2 不支持日志能力。<br>Ext3 的特点：</p>
<ul>
<li>可用性 由于支持日志记录，从故障恢复文件系统不需要执行 fsck，恢复时间从小时缩减到秒级。</li>
<li>数据完整性 通过挂载文件系统日志模式，所有的元数据和真实数据都会以日志方式记录。</li>
<li>速度 通过控制日志模式 data=writeback，到达文件系统就通知系统完成写，可以提升写入响应。对于重 IO 应用不建议用。。</li>
<li>灵活性 Ext2 可以方便的升级到 Ext3，Ext3 通过禁用日志系统，挂载为 Ext2.</li>
</ul>
<p>Ext3 3 种模式：journal，将 meta 和 data 都通过日志方式写入。ordered，只将 meta 通过日志方式写入，数据直接写入。writeback，直接回写，速度最快。<br>JFS、XFS ： JFS 支持 64 位架构，支持大文件和分区。XFS 和 JFS 特点类似，大文件和大分区支持。</p>
<h3 id="磁盘-IO-子系统"><a href="#磁盘-IO-子系统" class="headerlink" title="磁盘 IO 子系统"></a>磁盘 IO 子系统</h3><p>IO 子系统架构的基本概念<br><img src="http://huilu-blog.colinspace.com//Fuch7gYMggyyDzPGxqcsraafIpJe.png"><br>缓存技术：高等级内存缓存命中率越高，更快获取数据。<br><img src="http://huilu-blog.colinspace.com//FpO1DqLsMf-_N8_8ag7F_pcNXLKC.png"><br>刷新脏 buffer，内存数据中有变更，没有同步到磁盘，称为脏缓存，通过 sync，同步变更到磁盘。<br><img src="http://huilu-blog.colinspace.com//Fqi4U3Ql8AuP8WbMfVZxxAmLQRIg.png"><br>block 是驱动器能读写的最小单位，小文件多，block 设置小，大文件多，block 设置大。<br>IO 电梯算法<br>IO 设备驱动<br>SCSI 驱动的结构<br><img src="http://huilu-blog.colinspace.com//FiydyxxIAUy7rlbzo_1kRUZL8ghI.png"></p>
<h3 id="网络子系统"><a href="#网络子系统" class="headerlink" title="网络子系统"></a>网络子系统</h3><p>网络层结构和网络操作概览<br><img src="http://huilu-blog.colinspace.com//FsQBtAxKR0-3RMQYRLWEjiHt4yNl.png"></p>
<p>由于内核使用 buffer 来接收和发送数据，每种 buffer 的值在如下这些文件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/proc/sys/net/core/rmem_max</span><br><span class="line">/proc/sys/net/core/rmem_defaul/proc/sys/net/core/wmem_max</span><br><span class="line">/proc/sys/net/core/wmem_defaul/proc/sys/net/ipv4/tcp_mem</span><br><span class="line">/proc/sys/net/ipv4/tcp_rmem</span><br><span class="line">/proc/sys/net/ipv4/tcp_wmem</span><br></pre></td></tr></table></figure>

<p>sockt buffer 类型图解<br><img src="http://huilu-blog.colinspace.com//Fo2YczynlYSSov8bI7ADxiMleiqB.png"><br>网络数据包在 netfilter 中的流向<br><img src="http://huilu-blog.colinspace.com//FgmjjSM5bd6_mm4geEf_m-LIjZy8.png"><br>TCP 3 次握手过程<br><img src="http://huilu-blog.colinspace.com//Fni3Lp7V8J62MVUrlnRAkHHbgs4W.png"></p>
<h3 id="理解-linux-性能指标"><a href="#理解-linux-性能指标" class="headerlink" title="理解 linux 性能指标"></a>理解 linux 性能指标</h3><h4 id="处理器指标"><a href="#处理器指标" class="headerlink" title="处理器指标"></a>处理器指标</h4><ul>
<li>CPU 利用率（CPU utiliization）</li>
</ul>
<p>每个 CPU 的工作负载</p>
<ul>
<li>用户时间（User time）</li>
</ul>
<p>CPU 花在用户进程上的时间，高比率用户时间是正常的，代表系统正在执行真正的任务。</p>
<ul>
<li>系统时间（System time）</li>
</ul>
<p>CPU 花在内核操作的时间，包括硬中断和软中断。网络和磁盘驱动瓶颈可能导致内核时间持续高比例。正常系统应该花费较少时间在内核操作上。</p>
<ul>
<li>等待（Waiting）</li>
</ul>
<p>CPU 花在 IO 等待上的时间，系统不应该 IO 等待上花费较多时间。</p>
<ul>
<li>空闲（Idle）</li>
</ul>
<p>CPU 花费在等待任务上的时间。</p>
<ul>
<li>Nice time</li>
</ul>
<p>CPU 花费在调整进程优先级的时间。</p>
<ul>
<li>Load average</li>
</ul>
<p>等待执行队列中进程数+ 等待不可中断任务进程数</p>
<ul>
<li>Runable processes,可运行进程数</li>
</ul>
<p>CPU 可运行的进程数，不应超过物理 CPU 数量的 10 倍，否者，表明存在 CPU 瓶颈。</p>
<ul>
<li>Blocked 阻塞进程数</li>
</ul>
<p>数量多可能是 IO 瓶颈</p>
<ul>
<li>Context switch 上下文切换</li>
</ul>
<p>进程间上下文切换的统计，高上下文切换可能是驱动或应用程序问题。</p>
<ul>
<li>interrupts 中断</li>
</ul>
<p>中断包括硬中断和软中断。中断是由 CPU 时钟引起的。高中断值表明软件瓶颈，内核软件或驱动软件。</p>
<h4 id="内存指标"><a href="#内存指标" class="headerlink" title="内存指标"></a>内存指标</h4><ul>
<li>Free memory 空闲内存</li>
</ul>
<p>由于 linux 系统会分配大量不用的内存作为文件系统缓存，所以，真实可用内存= Free + cache + buffer</p>
<ul>
<li>Swap Usage</li>
</ul>
<p>每秒 300-400 页的 swap 交换表明内存瓶颈。</p>
<ul>
<li>Buffer and Cache</li>
</ul>
<p>缓存块设备和文件系统的空间。</p>
<ul>
<li>SLabs</li>
</ul>
<p>内核占用的空间。</p>
<ul>
<li>Active versus inactive memory 活动和不活动内存</li>
</ul>
<p>不活动空间可能会被 kswapd 交换到 swap。</p>
<h4 id="网络接口指标"><a href="#网络接口指标" class="headerlink" title="网络接口指标"></a>网络接口指标</h4><ul>
<li>收发包数量</li>
<li>收发字节数</li>
<li>每秒冲突</li>
<li>丢包率</li>
<li>过载</li>
</ul>
<p>数据包操过网络 buffer 空间，结合丢包率查看。</p>
<ul>
<li>错误包</li>
</ul>
<p>可能和连线有关</p>
<h4 id="块设备指标"><a href="#块设备指标" class="headerlink" title="块设备指标"></a>块设备指标</h4><ul>
<li>Iowait IO 等待</li>
<li>Average queue length 平均队列长度</li>
</ul>
<p>2-3 正常，超过可能 IO 瓶颈。</p>
<ul>
<li>Average wait 平均等待实际</li>
</ul>
<p>IO 请求到被执行的平均时间。</p>
<ul>
<li>Transfers per second 每秒 IO 数量</li>
<li>Blocks read/wait per second 每秒块读写亮</li>
<li>kb per second read/wait 每秒读写字节数</li>
</ul>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a target="_blank" rel="noopener" href="http://baodunqiao.blog.sohu.com/104016437.html">http://baodunqiao.blog.sohu.com/104016437.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.yuque.com/attachments/yuque/0/2020/pdf/106585/1595993054061-e9bf6f82-a461-4a87-850d-72c436ec7f3a.pdf">Linux Performance and Tuning Guidelines.pdf</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/07/27/yuque/docker-daemon%E4%BB%A3%E7%90%86%E5%9D%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="mayi">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蚂蚁的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 蚂蚁的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/07/27/yuque/docker-daemon%E4%BB%A3%E7%90%86%E5%9D%91/" class="post-title-link" itemprop="url">docker-daemon代理坑</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-07-27 17:04:04" itemprop="dateCreated datePublished" datetime="2020-07-27T17:04:04+08:00">2020-07-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-06-29 11:46:40" itemprop="dateModified" datetime="2022-06-29T11:46:40+08:00">2022-06-29</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>服务器无互联网访问权限，docker 拉取镜像。</p>
<h2 id="处理"><a href="#处理" class="headerlink" title="处理"></a>处理</h2><p>docker daemon https 代理填写 http 代理。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/systemd/system/docker.service.d/https-proxy.conf</span><br><span class="line">[Service]</span><br><span class="line">Environment=&quot;HTTPS_PROXY=http://proxy.esl.cisco.com:80/&quot;</span><br></pre></td></tr></table></figure>

<p>参考<br><a target="_blank" rel="noopener" href="https://github.com/docker/for-linux/issues/415">https://github.com/docker/for-linux/issues/415</a><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/michael9/p/12300824.html#_labelTop?tdsourcetag=s_pctim_aiomsg">https://www.cnblogs.com/michael9/p/12300824.html#_labelTop?tdsourcetag=s_pctim_aiomsg</a><br><a target="_blank" rel="noopener" href="https://www.ilanni.com/?p=14534">https://www.ilanni.com/?p=14534</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/07/20/yuque/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="mayi">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蚂蚁的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 蚂蚁的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/07/20/yuque/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">深入理解计算机系统-笔记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-07-20 14:35:07" itemprop="dateCreated datePublished" datetime="2020-07-20T14:35:07+08:00">2020-07-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-06-29 11:46:40" itemprop="dateModified" datetime="2022-06-29T11:46:40+08:00">2022-06-29</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>学习极客时间-左耳听风专栏，程序员练级攻略一系列文章了解到，需要克服三座大山：1 编程语言，2 理论知识，3 系统知识。工作中系统知识用得较多，就重点突破这一领域。系统知识列出了必读书《深入理解计算机系统》、《Unix 高级环境编程》、《Unix 网络编程》《TCP/IP 详解卷 I 协议》。以上 4 本为经典版，知识密度高。若难以理解经典版，可阅读解析版书籍《Linuc C 编程一站式学习》《TCP/IP 网络编程》《图解 TCP/IP》《The TCP/IP Guide》.实践指导书《Wireshark 数据包分析实战》《Linux/Unix 系统编程手册》/《Linux System Programming》/《Linux 系统编程》-罗伯特.拉姆<br>本文记录看完第一遍《深入理解计算机系统》感受和 get 的知识点，4 天时间。</p>
<h2 id="还剩下的"><a href="#还剩下的" class="headerlink" title="还剩下的"></a>还剩下的</h2><p>目录：计算机系统漫游、信息的表示和处理、程序的机器级表示、处理器体系结构、优化程序性能、存储器层次结构、链接、异常控制流、虚拟存储器、系统级 IO、网络编程、并发编程。<br>信息表示和处理：大端序和小端序，存储器中高位在左还是右。2 进制、16 进制、10 进制转换及算数运算。如何用电路实现运算和存储。<br>程序的机器级表示：程序的编译分为预处理、汇编、编译、链接，最终的可执行文件是链接器能够加载的字节码。C 语言转换为汇编语言过程解读。<br>处理器体系结构：CPU 结构。包括 PC 程序计数器，用于指定 CPU 当前执行的指令。MCU 运算单元，执行逻辑运算。8 个寄存器。<br>优化程序性能：使用局部性原理，减少跳转。</p>
<blockquote>
<p>你能获得的对程序最大的加速比，就是当你第一次让它工作起来的时候。</p>
</blockquote>
<p>所以运行起来最关键。<br>存储器层次结构：寄存器-高速缓存-内存-硬盘，逐渐变慢，逐渐便宜。SDD 存储器有写入擦除次数限制，SSD 存储将多个块组成一个页作为读写管理单元，擦除是以页为单位。SSD 被写坏一定比例，会加速写坏过程，所以 IOS 系统保留大量 SSD 空间，避免 SSD 加速写坏，所以苹果手机运行很久都比较流畅。Android 系统保留 SSD 空间较少，一旦剩余空间不足 80%，SSD 磨损加速，之后 SSD 可用空间减少，行成恶性循环。所以使用 SSD 要保留 20%空间空闲，增加 SSD 寿命。<br>链接：as 工具整合目标文件为一个可被链接器执行的链接文件。链接的目的是大型系统模块解耦，只用重新编译变化的部分，不用整个项目重新编译。静态链接，将公共库汇编后的目标文件 libc.a（字节码）拷贝到编译程序的目标文件中，整合在一起。动态链接，链接器将共享库 libc.so 地址写入可执行文件，程序运行时加载这些字节码，这些字节码在内存中，其他程序可共享。-fPIC 生成成与位置无关的字节码，会增加一层引用。<br>异常控制流分为 4 种，中断 interpret，陷阱 trap、故障 fault、终止 abort。中断用于硬件设备之间通信。陷阱用于实现系统调用。<br>虚拟存储器：进程是可执行文件运行的实例，进程上下文保存在内存中。虚拟存储器是为了简化程序到执行的过程。对所有程序都提供一个相同的地址空间。CPU 可直接访问 PA 物理内存，也可以 CPU 访问虚拟地址 VA，地址翻译器将 VA 转换为 PA。地址翻译器由 CPU 和操作系统内核共同维护。内核控制虚拟存储器资源分配，虚拟内存以页为单位管理，内存不足引起的缺页软中断会导致程序性能下降。linux 系统 SLB 分配器。内存的几种标识，cache、不可分配，在查看内存是要看内存泄漏，看其中的某类型内存。<br>系统级 IO，网络编程、并发编程都是系统上层应用。并发编程 3 种实现：1 多进程，进程间通信效率低。2IO 多路复用，select 函数.3 多线程，控制锁，使用信号量。</p>
<h2 id="感受"><a href="#感受" class="headerlink" title="感受"></a>感受</h2><p>在排查 nfs 服务内存占用持续高，需要定时重启 nfs 时，需要内存分配相关知识，可以分析更明确。<br>编译 openssh-server 时，系统 openssl 库和 openssh 使用的库不一致，如何解决，都是动态链接库，难道要静态编译？<br>程序报错排查 strace,oom-killer 等，是需要了解编译-运行-结束全过程的。程序运行的环境，就是系统知识。<br>后面还需再次阅读。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/06/04/yuque/%E7%BF%BB%E8%AF%91-%E5%BF%AB%E9%80%9F%E6%8F%90%E5%8D%87%E7%BC%96%E7%A8%8B%E8%83%BD%E5%8A%9B%E7%9A%84%E5%85%B3%E9%94%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="mayi">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蚂蚁的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 蚂蚁的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/06/04/yuque/%E7%BF%BB%E8%AF%91-%E5%BF%AB%E9%80%9F%E6%8F%90%E5%8D%87%E7%BC%96%E7%A8%8B%E8%83%BD%E5%8A%9B%E7%9A%84%E5%85%B3%E9%94%AE/" class="post-title-link" itemprop="url">翻译-快速提升编程能力的关键</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-06-04 21:00:43" itemprop="dateCreated datePublished" datetime="2020-06-04T21:00:43+08:00">2020-06-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-06-29 11:46:40" itemprop="dateModified" datetime="2022-06-29T11:46:40+08:00">2022-06-29</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>原文链接  <a target="_blank" rel="noopener" href="http://blog.thefirehoseproject.com/posts/learn-to-code-and-be-self-reliant/">http://blog.thefirehoseproject.com/posts/learn-to-code-and-be-self-reliant/</a></p>
<p>当你学习编程时，有一个阶段你发现万物都在改变。在消防带培训中心，我们叫做编程的转折点。过了这个阶段，你开发的方式会显著不同。越过转折点，将会进入一个自给自足的编程阶段-你不在需要手把手的指导。那将是一个令人沮丧的经历，但是一旦你越过，你会有难以置信的能量。<br>在消防带，我们的目标不仅是教你 Ruby，如何构建 web 应用程序或编写测试用例。尽管我们确实会教那些技能，而且更多。我们的主要目标是促进学生穿过转折点，之后他们将获得解决他们遇到问题的能力。我们相信，能够解决自己的问题是一个无价的技能。这种教学方法相比于简单的学习构建一系列 app 能伴随你走得更远。</p>
<h3 id="辅导阶段（3-8-周的认真编程）"><a href="#辅导阶段（3-8-周的认真编程）" class="headerlink" title="辅导阶段（3-8 周的认真编程）"></a>辅导阶段（3-8 周的认真编程）</h3><p>当你开始学习编程时，有些信息你不知道。这些信息叫做特定领域知识。例如：如何用 ruby 写一个循环或如用 Ruby On Ralis 从数据库提取一些信息。每个编程语言环境都包含的独一无二的领域专业知识。<br>成为自给自足的开发者的第一步是学习如何处理特定的任务。一旦你胜任某些任务的处理，你就会知道如何将多个任务协调处理。过了一段时间，你会开始意识到一些编程范式，最终，一开始感觉困惑和陌生的东西会变得习以为常。</p>
<h3 id="对于初学者，获得的最关键的技能是注重细节"><a href="#对于初学者，获得的最关键的技能是注重细节" class="headerlink" title="对于初学者，获得的最关键的技能是注重细节"></a>对于初学者，获得的最关键的技能是注重细节</h3><p>开始过文档和指导材料时，最重要的是密切关注细节。甚至是那些错别字和拼写错误都会导致报错和 bug。一开始，看到报错信息会令人沮丧，但是这是学习过程中一个重要的阶段。在安全的环境中处理报错和问题会教会你这一阶段最重要的技能：注重细节。<br><strong>排查故障信息是非常重要的。</strong>事情的真相是，报错信息是就是编程的一部分。对新手和经验丰富的人都一样。唯一不同的是，你处理报错信息的经验越多，你修复他们花费的时间越少，那是因为：</p>
<ul>
<li>一段时间后，你学会了<strong>如何快速阅读错误信息</strong>和提取问题的相关细节。第一次看见错误信息，会花费你一定的时间去理解是什么意思。当你看过了成百个报错信息后，你会指出问题的所在和修复问题需要的相关细节。</li>
<li>你会<strong>从每一个你处理过的问题中积累经验。</strong>不要只是修复问题就完了，你要要明白代码哪里错了。每一次从报错中学到的，都会让你在下一次处理问题时更快。</li>
<li>最初你对每个你遇到的问题都要去寻求帮助，一段时间后，你会减少错误代码直接 google 搜索的频率。</li>
</ul>
<p>在初学阶段，你会跟随教程。最初你发现不容易跟上教程并且错误频发。一段时间后，你会提升你排错的能力并且更关注细节，编码会更快。当你经历过了初学阶段，你会注意到你编码更快。<br>在这个时候，部分人感觉充满自信-视乎可以离开学步车开始在没有指导手册情况下构建一些东西-乐于深入其中。另一些人会寻找更多的辅导，尝试掌握更多的专业领域知识以期望“完全掌握”。不幸的是，入门手册只能带你走这么远，在入门手册中不能找到真正的自信。真正的自信源于不断解决你不知道答案的问题，自己独立的找到解决方法。<br><strong>关于编程，不幸的小秘密是…</strong><br>你永远不会知道你需要解决问题的全部知识。你大概期望你学完了你需要学习的所有知识，然后全副武装的出发。这个时刻永远不会发生。<br>编程是一个终生学习的过程。老练的软件工程师会寻找那些他们还没有解决过的问题去解决，因为这让他们有机会学习更多。如果发现你一直在等待你感觉 ok，学会了所有关于编码知识的时刻，你要认识到这一天永远不会到来。这真是美妙的事情。<br><strong>你会开始进入你旅程的下一阶段，当你：</strong></p>
<ul>
<li>你遇见了足够多的报错，<strong>报错不再惊吓到你。</strong>相反，你知道如何破解报错信息，哪里去寻找代码里的问题。</li>
<li><strong>你能够专业的 google 解决方案。</strong>当你增加新功能或看到令人沮丧的错误信息是，你知道搜索什么来找到你需要的信息。</li>
<li>你能够<strong>参考你应用程序中其他部分中的代码并且遵循编程范式，</strong>而不是一步一步跟随指导。</li>
</ul>
<h3 id="转折点（2-4-周正确的心态）"><a href="#转折点（2-4-周正确的心态）" class="headerlink" title="转折点（2-4 周正确的心态）"></a>转折点（2-4 周正确的心态）</h3><p>在编程学习过程中，转折点阶段是一个令人沮丧的阶段。但总的来所，这是最关键的一个阶段。这个阶段，你开始丢掉手册，开始解决没人给你准备好解决方案的问题。<br>某些时候，你会感觉到你还没有准备好来应付这一阶段的问题，期望回去做那些有精确指导的事情。不要陷入这种心态。你感觉沮丧的原因是：</p>
<h3 id="在转折点阶段，你编程速度会比前一个阶段慢-10-20-倍。"><a href="#在转折点阶段，你编程速度会比前一个阶段慢-10-20-倍。" class="headerlink" title="在转折点阶段，你编程速度会比前一个阶段慢 10-20 倍。"></a>在转折点阶段，你编程速度会比前一个阶段慢 10-20 倍。</h3><p>你会开始怀疑自己，疑惑自己是否有能力成为一个程序员。在这个阶段感到沮丧和疑惑是正常的。<br>事实上，仅管你会感觉到你在学习和完成事情上速度变慢，事实上你正在获得最重要的东西。当你特定领域知识学完后，你将学的所有知识都是过程性知识。<br>过程性知识是一种一直伴随你的自学能力。当你需要实现某些新功能，该到 gogoole 上去搜索什么呢？在这个时间点上，当很多事情要你完成是时，你感觉自己深处黑暗当中。学会如何自己找到光是决定性的，因为永远不会知道你需要知道的所有事情。所以你需要一边自学一边解决问题。<br><strong>大多数人没有意识到，为了学习编程，既要学习特定领域知识，也要学习过程性知识。</strong></p>
<h3 id="在余生，每一天都要突破你的极限。"><a href="#在余生，每一天都要突破你的极限。" class="headerlink" title="在余生，每一天都要突破你的极限。"></a>在余生，每一天都要突破你的极限。</h3><p>有些工程师在找到立足点后一直待在他们的舒适区。这种类型的程序员被叫做维护型程序员-不是你需要成为的类型。相反，你需要在余生的每一天中都努力走出你的舒适区。程序员辞掉他们工作最主要原因是：“自从我解决了我感兴趣后的问题后，再也没有任何挑战了。”<br>相比在舒适区编程，你更需要用舒适区外部的技能去解决问题。这是唯一一种扩展你技能的方式。<br>有一个在消防带度过转折点阶段的学员说过</p>
<blockquote>
<p>我至今仍然陷入其中，我只是获得一些我曾经获得过的舒适知识。</p>
</blockquote>
<h3 id="在-Web-开发中，确实会有两个转折点同时到来。"><a href="#在-Web-开发中，确实会有两个转折点同时到来。" class="headerlink" title="在 Web 开发中，确实会有两个转折点同时到来。"></a>在 Web 开发中，确实会有两个转折点同时到来。</h3><p><strong>web 开发转折点</strong>是你有能力构建任何你想构建的数据驱动应用。意味着你能构建一个多页面的 web 应用，并用一个简单的数据库存储和关联信息。web 开发者称这个叫做“精通增删改查”。在这个阶段，你应该能通过 github 上或博客上的文档集成一些简单的三方库。<br><strong>算法和数据结构转折点</strong>是一个更深层次的转折点，但实际上更重要。攻克了这一阶段就会精通他们所使用的编程语言。除了掌握编程的基本原理，也会对解决复杂编码问题有深入理解。<br>掌握了数据结构和算法的人能够：</p>
<ul>
<li>写排序算法</li>
<li>实现和翻转链表</li>
<li>理解并借助栈、队列、和树来编程</li>
<li>使用递归和迭代方法来写计算机程序</li>
</ul>
<p>简而言之，一旦你跨越了这个转折点，你会掌握数据处理方法，并了解影响代码新性能的关键。传统的计算机科学教育只关注于让他们的学生跨越算法和数据结构阶段。很多学校通过已经不在工业界使用的编程语言来教授这些知识，比如 Schema、Racket 或 LISP。<br><strong>大多数技术面试，面试官会假定你已经越过了 web 开发阶段，考虑到那是更容易做到的。他们的问题更聚焦于考察你的数据结构和算法能力。</strong>那些问题通常关注于上述我们提到的话题：排序算法、翻转链表、使用栈、队列和树。</p>
<h3 id="一旦开发者跨越了-web-开发阶段和数据结构及算法阶段，他就掌握了通向编程王国的钥匙。"><a href="#一旦开发者跨越了-web-开发阶段和数据结构及算法阶段，他就掌握了通向编程王国的钥匙。" class="headerlink" title="一旦开发者跨越了 web 开发阶段和数据结构及算法阶段，他就掌握了通向编程王国的钥匙。"></a>一旦开发者跨越了 web 开发阶段和数据结构及算法阶段，他就掌握了通向编程王国的钥匙。</h3><p>那些开发者能解决一些交叉问题：在高级 web 应用环境中构建需要的复杂算法。那正是高级 web 开发者每天处理的问题。</p>
<h3 id="转折点结论"><a href="#转折点结论" class="headerlink" title="转折点结论"></a>转折点结论</h3><p>转折点最大的结论听起来有点违反直觉，先深呼吸一下：</p>
<blockquote>
<p>在学习编程的整个宏大事项中，特定领域知识并不重要</p>
</blockquote>
<p>是的，我不是在开玩笑，它真的不重要。一旦你跨过了转折点阶段，那些概念可以在一两周，甚至几天通过入门手册学会。<br><strong>最后，真正关键的是：</strong></p>
<ul>
<li>你对一个<strong>web 框架有牢固的理解</strong></li>
<li>你对使用任何语言<strong>编写复杂算法代码有牢固的理解</strong></li>
</ul>
<h3 id="招聘经理期望开发者有牢固的-web-开发和算法技能。"><a href="#招聘经理期望开发者有牢固的-web-开发和算法技能。" class="headerlink" title="招聘经理期望开发者有牢固的 web 开发和算法技能。"></a>招聘经理期望开发者有牢固的 web 开发和算法技能。</h3><p>当我在 PayPal 工作时，我们组招聘了一个没有任何 Ralis 经验的高级 Rails 开发-但是他在 Python、LISP、Perl 方面有很多编码经验。几天后，他已经在组内有较大影响力了。在几周内，有巨大影响力。他很快成为技术组的主管。这是我们做过的最成功的招聘决定。<br><strong>别迷恋技术栈。</strong>很多人都会这么说“AngularJS 最近正火”，“Javascript 正在上升”，“最新的趋势是…”,我的回复是：“那有如何？”。当你学习如何编程时，你主要目的是找到转折点并跨越它。一旦你做到了，学习新的，时尚性感的语言都不困难。<br><strong>变得独立自主。</strong>有能力通过不通过指导手册学习新的编码技能意味着你不再需要等待任何人的帮助。意味着对于大多数你需要学习的，通过简单的搜索和阅读特定的你需要的材料就行。<br>这并不意味着你会立刻“知道”一切，只是你能“算出”一切。本质上讲，你将无坚不摧。</p>
<h3 id="在转折点阶段你要发展的技能"><a href="#在转折点阶段你要发展的技能" class="headerlink" title="在转折点阶段你要发展的技能"></a>在转折点阶段你要发展的技能</h3><p>作为软件开发者，最好的参考材料时你以前写过的类似的代码。当你完全理解了你写的代码，你不需要记录所有的细节到你脑中。这意味着<strong>当你要开发一个新功能时，第一个要问自己的问题是：“我是否曾经做过类似的？”。</strong>如果做过，在脑中一行一行回顾和检查这些代码。重新理解是怎么做的并问自己“我现在能用相同的方式吗”？<br>你会花大量时间去看视频因为<strong>视频沉溺于解释特定领域细节。</strong>例如当你要集成一个 google 地图 API 时，如果你曾经做过，你会花费不到一分钟的时间去打开 github 上的代码，然后拷贝粘贴到新项目中。如果看视频，可能需要 10-30 分钟的时间重复观看。</p>
<h3 id="高效跨越转折点的策略"><a href="#高效跨越转折点的策略" class="headerlink" title="高效跨越转折点的策略"></a>高效跨越转折点的策略</h3><p>由于跨越转折点时编程学习中最重要的部分，你必须为自己设置一个尽可能顺畅的流程。意味着你需要在辅导之前准备一下，在这段时间保持正确的心态。<br><strong>在辅导阶段，从浏览结构材料中跳出来，让自己一直直面问题。</strong></p>
<ul>
<li>对那些重要的经验教训，尝试着跳出指导手册的范围做些事情。如果你看的指导手册提供挑战和自测部分，完成他们。解决没有帮助文档的挑战会让你解决那些没有结构化手册的问题更有经验。</li>
<li><strong>尽可能的少用手册。</strong>在消防带，我们会让学员直接集成某个模块或则按照手册完成一些事情，而不是像大多数初学者那样跟随手册执行命令。很多学生会读文档，入门手册作为备份。请注意到：文档会把你认为是已经跨越转折点的开发着。能顺畅的阅读和跟随 github 上的文档指导能助你一臂之力。</li>
<li>关注重要的事情并尽量代码复用。学会做一些通用的事情，例如：从头开始构建一个应用程序，推送新 app 到 github 或则 Heroku，在早期做数据迁移。</li>
</ul>
<p>越过转折点是具有挑战性的，这里给出一些建议帮助你越过：</p>
<ul>
<li>明白这是一个困难的过程并且放轻松，当然要实事求是。你不能拿你过文档的超级速度和自己学习的蜗牛速度做对比。你要牢记，你在独自学习。并且你在这个阶段，你正在用新技能解决新问题。</li>
<li>如果你感到不自信，你要明白这种感觉完全正常，继续努力吧。如果你继续奋斗，尝试着和已经跨越转折点阶段的人交流交流。那有助于你找到当前你所处位置，并确保你正在经历的只是暂时性的。<strong>持续工作，但不能过度工作。</strong>在游戏的这个阶段，要明白你每天最多只能高效率的工作 6 小时。超负荷的工作只能延长你跨越转折点的时间。</li>
</ul>
<p>在这个阶段，增加自信的最好方法是打破任何你怀疑的。你的情绪开始像过山车一样。有时候你感觉像着了火一样，但是经过 15 分钟一直专研这个问题，你的感觉会完全相反。<br>一个问题如果花费了 5 分钟或 5 小时都毫无头绪，会让人感到沮丧。充足的信心是你每一次你越过障碍并且成功实现了一个新功能的保证。当独立解决了很多难题后，你会沉迷于做舒适区外的事情。</p>
<h3 id="如何知道你已经跨越了转折点"><a href="#如何知道你已经跨越了转折点" class="headerlink" title="如何知道你已经跨越了转折点"></a>如何知道你已经跨越了转折点</h3><p>转折点最后一个阶段是认同。认同软件开发是一个持续学习的过程。承认成功学会任何事情的感觉，就是意味着开始思考解决更复杂的问题。<br><strong>你感受到转折点阶段了吗？向你的朋友分享并讨论这篇文章，你会惊奇的发现很多人都曾经遇到并越过了转折点。</strong></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/06/04/yuque/django%E7%AE%80%E5%8D%95%E5%8D%9A%E5%AE%A2%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="mayi">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蚂蚁的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 蚂蚁的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/06/04/yuque/django%E7%AE%80%E5%8D%95%E5%8D%9A%E5%AE%A2%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">django简单博客总结</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-06-04 15:42:21" itemprop="dateCreated datePublished" datetime="2020-06-04T15:42:21+08:00">2020-06-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-06-29 11:46:40" itemprop="dateModified" datetime="2022-06-29T11:46:40+08:00">2022-06-29</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>博客功能：用户注册与登陆，登陆后可以发布内容，评论博客。</p>
<h2 id="dango-auth-模块用于实现用户登陆与注册"><a href="#dango-auth-模块用于实现用户登陆与注册" class="headerlink" title="dango auth 模块用于实现用户登陆与注册"></a>dango auth 模块用于实现用户登陆与注册</h2><p>urls:<br>signup 注册链接<br>login  登陆链接<br>logout  登出链接<br> model：django.contrib.auth.models.User</p>
<h3 id="views"><a href="#views" class="headerlink" title="views"></a>views</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">from django.shortcuts import render, redirect</span><br><span class="line">from django.http import HttpResponse</span><br><span class="line">from django.contrib.auth.models import User</span><br><span class="line">from django.contrib.auth import views</span><br><span class="line">from django.contrib.auth.forms import UserCreationForm</span><br><span class="line">from django.contrib.auth.decorators import login_required</span><br><span class="line"># Create your views here.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def signup(request):</span><br><span class="line">    if request.method == &#x27;POST&#x27;:</span><br><span class="line">        form = UserCreationForm(request.POST)</span><br><span class="line">        if form.is_valid():</span><br><span class="line">            user = form.save()</span><br><span class="line">            return redirect(&#x27;pri_home&#x27;)</span><br><span class="line">    else:</span><br><span class="line">        form = UserCreationForm</span><br><span class="line">    return render(request, &#x27;signup.html&#x27;, &#123;&#x27;form&#x27;: form&#125;)</span><br><span class="line"></span><br><span class="line">def login(request):</span><br><span class="line">		views.LoginView.as_view(template_name=&#x27;login.html&#x27;)</span><br><span class="line"></span><br><span class="line">def logout(request):</span><br><span class="line">		views.LogoutView.as_view()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="form"><a href="#form" class="headerlink" title="form"></a>form</h3><p>使用内置 form django.contrib.auth.forms.UserCreationForm</p>
<p>templates:<br>signup.html 渲染 UserCreationForm，和其他一些链接。<br>login.html  内部视图 LoginView.as_view()使用，默认传登陆 form 到模板。</p>
<h3 id="settings"><a href="#settings" class="headerlink" title="settings"></a>settings</h3><p>设置模板目录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DIRS&#x27;: [</span><br><span class="line">            os.path.join(BASE_DIR, &#x27;templates&#x27;)</span><br><span class="line">        ],</span><br></pre></td></tr></table></figure>

<p>设置登陆 url，登陆跳转 url，注销跳转 url</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">STATIC_URL = &#x27;/static/&#x27;</span><br><span class="line">LOGIN_REDIRECT_URL = &#x27;pri_home&#x27;</span><br><span class="line">LOGIN_URL = &#x27;login&#x27;</span><br><span class="line">LOGOUT_REDIRECT_URL = &#x27;pub_home&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="视图高级用法"><a href="#视图高级用法" class="headerlink" title="视图高级用法"></a>视图高级用法</h2><p>基于函数的视图 FBV<br>基于类的视图 CBV<br>基于类的通用视图   GCBV</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>一开始就学框架很不好，因为你不知道具体细节，只知道遇到这个问题，就这么用就行了，你会不求甚解。积累的都是知道型知识，而不是一套解决问题的通用方法。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/44/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/44/">44</a><span class="page-number current">45</span><a class="page-number" href="/page/46/">46</a><span class="space">&hellip;</span><a class="page-number" href="/page/76/">76</a><a class="extend next" rel="next" href="/page/46/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">mayi</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
